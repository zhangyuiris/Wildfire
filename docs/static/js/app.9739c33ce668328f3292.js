webpackJsonp([1],{AfBI:function(e,t){},Ffix:function(e,t){},NHnr:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("7+uW"),n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var r=o("VU/8")({name:"App"},n,!1,function(e){o("v9Yw")},null,null).exports,s=o("/ocq"),i={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"convey animated bounceInDown"},[o("div",{staticClass:"bg"},[o("div",{staticClass:"track"},e._l(e.convey,function(t,a){return o("div",{key:a,staticClass:"block"},[o("a",{style:t.selected?e.styles:{},on:{click:function(o){return e.clickConvey(a,t.code)}}},[o("img",{attrs:{src:"static/el-"+t.code+".png",height:"100%",ondragstart:"return false;",alt:""}})])])}),0)])])},staticRenderFns:[]};var c=o("VU/8")({name:"Convey",data:function(){return{styles:{border:"4px solid #fee411","border-radius":"4px","padding-top":"40px","box-sizing":"border-box"},convey:this.$store.state.convey}},methods:{clickConvey:function(e,t){this.$store.commit("setConveyChoose",{index:e,code:t})}},created:function(){this.$store.commit("refreshConvey")},destory:function(){this.$store.commit("resetConvey")}},i,!1,function(e){o("Ffix")},"data-v-8a1d78c6",null).exports,d=o("Xxa5"),p=o.n(d),l=o("exGp"),m=o.n(l),u=o("mvHQ"),f=o.n(u),h={name:"Maps",data:function(){return{combineStyle:{},combine:!1,change:"fire3",changeWater:"water1",row:6,map:this.$store.state.map}},methods:{checkWin:function(){return-1===f()(this.map).indexOf("fire")},check:function(){return-1===f()(this.map).indexOf("water")},undisplayCombine:function(){var e=this;return m()(p.a.mark(function t(){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:setTimeout(function(){e.combine=!1},200);case 1:case"end":return t.stop()}},t,e)}))()},init:function(){this.$store.commit("initMap")},clickMap:function(e,t,o){var a=this;return m()(p.a.mark(function n(){var r,s,i;return p.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a.combineStyle={left:68*(t+3)+44+"px",top:68*e+46+"px"},a.combine=!0,n.next=4,a.undisplayCombine();case 4:for(a.$store.commit("setMapChoose",{row:e,col:t,code:o}),r=0,s=0;s<6;s++)for(i=0;i<9;i++)"fire"===a.map[s][i].code&&r++;a.$emit("lose",a.map),0===r&&a.$store.commit("openWinDialog");case 9:case"end":return n.stop()}},n,a)}))()}},created:function(){var e=this;return m()(p.a.mark(function t(){var o;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.init(),t.next=3,e.$store.state.map;case 3:e.map=t.sent,o=e,setInterval(function(){"fire3"===o.change?o.change="fire4":o.change="fire3","water1"===o.changeWater?o.changeWater="water2":o.changeWater="water1"},200);case 6:case"end":return t.stop()}},t,e)}))()}},v={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"bg animated bounceInUp"},[o("div",{staticClass:"maps"},[o("div",{staticClass:"block"},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.combine,expression:"combine"}],staticClass:"combine",style:e.combine?e.combineStyle:{}},[o("img",{attrs:{src:"static/combine.gif",width:"68px;",height:"68px"}})]),e._v(" "),e._l(e.map,function(t,a){return o("div",{key:a+"row",staticClass:"row"},e._l(t,function(t,n){return o("div",{key:n+"col",staticClass:"col"},["fire"===t.code?o("div",[o("div",{staticClass:"dock",on:{click:function(o){return e.clickMap(a,n,t.code)}}},[o("img",{attrs:{src:"static/"+e.change+".png",width:"100%",height:"100%",ondragstart:"return false;",alt:""}})])]):"water"===t.code?o("div",[o("div",{staticClass:"dock",on:{click:function(o){return e.clickMap(a,n,t.code)}}},[o("img",{attrs:{src:"static/"+e.changeWater+".png",width:"100%",height:"100%",ondragstart:"return false;",alt:""}})])]):"grass"===t.code?o("div",[o("div",{staticClass:"dock",on:{click:function(t){return e.clickMap(a,n,"grass")}}})]):o("div",[o("div",{staticClass:"dock",on:{click:function(o){return e.clickMap(a,n,t.code)}}},[o("img",{attrs:{src:"static/"+t.code+".png",width:"100%",height:"100%",ondragstart:"return false;",alt:""}})])])])}),0)})],2)])])},staticRenderFns:[]};var w={name:"Index",components:{Maps:o("VU/8")(h,v,!1,function(e){o("tajt")},"data-v-6246a176",null).exports,Convey:c},data:function(){return{}},computed:{dialogWinVisible:function(){return this.$store.state.dialogWinOpen},dialogLoseVisible:function(){return this.$store.state.dialogLoseOpen}},methods:{click:function(){this.$store.commit("systemRound"),this.$store.commit("refreshConvey");for(var e=this.$store.state.map,t=0,o=0;o<6;o++)for(var a=0;a<9;a++){"fire"===e[o][a].code&&t++}54===t&&this.$store.commit("openLoseDialog")},play:function(){this.$router.push({path:"/",params:{finished:"finished"}}),this.$store.commit("closeDialog"),this.$store.commit("resetConvey")}},created:function(){}},g={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-row",{staticStyle:{width:"100vw"}},[o("el-col",{attrs:{span:16,offset:4}},[o("Convey"),e._v(" "),o("Maps")],1),e._v(" "),o("el-col",{attrs:{span:2}},[o("div",{staticClass:"next animated bounceInRight",on:{click:function(t){return e.click()}}},[o("img",{staticStyle:{width:"100px","padding-top":"300px"},attrs:{src:"static/next.png"}})])])],1),e._v(" "),e.dialogWinVisible?o("div",{staticClass:"layer"},[o("div",{staticClass:"modal"},[o("div",{staticStyle:{"padding-top":"380px"}},[o("img",{attrs:{src:"static/victorybutton.png",width:"200px"},on:{click:function(t){return e.play()}}})])])]):e._e(),e._v(" "),e.dialogLoseVisible?o("div",{staticClass:"layer"},[o("div",{staticClass:"modal lose"},[o("div",{staticStyle:{"padding-top":"380px"}},[o("img",{attrs:{src:"static/losebutton.png",width:"200px"},on:{click:function(t){return e.play()}}})])])]):e._e()],1)},staticRenderFns:[]};var y=o("VU/8")(w,g,!1,function(e){o("nnmr")},"data-v-0ba3d464",null).exports,C={name:"Start",data:function(){return{progress:0,show:!1}},methods:{start:function(){this.$store.commit("restart"),this.$router.push("/index")},progressBar:function(){this.progress=1;var e=Math.floor(20*Math.random()+20),t=this,o=setInterval(function(){t.progress+=Math.floor(3*Math.random()+1),t.progress>98&&(t.progress=100,t.show=!t.show,clearInterval(o))},e)}},created:function(){this.progressBar()}},x={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-container",{staticClass:"container"},[o("el-row",[o("el-col",{staticClass:"animated bounceInDown",attrs:{span:16,offset:4}},[o("img",{attrs:{src:"static/name.png",width:"40%"}})]),e._v(" "),o("el-col",{staticStyle:{"padding-top":"100px"},attrs:{span:4,offset:10}},[o("div",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!show"}],staticClass:"loading"},[o("div",[e._v(e._s(e.progress)+"%")])]),e._v(" "),o("a",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticStyle:{cursor:"pointer"},on:{click:e.start}},[o("img",{attrs:{src:"static/start.png",width:"100%"}})])]),e._v(" "),o("el-col",{staticStyle:{"padding-top":"40px"},attrs:{span:4,offset:10}},[o("div",{staticStyle:{display:"flex","justify-content":"space-around"}},[o("a",{staticClass:"github",attrs:{href:"https://github.com/zhangyuiris/Wildfire"}},[e._v("GITHUB")]),e._v(" "),o("a",{staticClass:"github",attrs:{href:"https://github.com/zhangyuiris/Wildfire/blob/master/README.md"}},[e._v("README")])])])],1)],1)},staticRenderFns:[]};var b=o("VU/8")(C,x,!1,function(e){o("AfBI")},"data-v-68f6b6d6",null).exports,k=o("gBtx"),M=o.n(k),_=o("Dd8w"),$=o.n(_),R=o("NYxO");function W(e,t,o,a,n){this.type=e,this.code=t,this.canBeFired=o,this.standRound=a,this.isFired=n,this.remainRound=a}function F(e,t){if("grass"===t)return e;if("fire"===t)return"dust"===e?"stone":"ice"===e?"water":"water"===e?"water":"swamp"===e?"dust":"fire";if("water"===t&&"dust"===e)return"swamp";if("swamp"===e){if("water"===t)return"swamp";if("dust"===t)return"swamp"}return t}var D=new W("草坪","grass",!0,0,!1),O=new W("火","fire",!0,0,!0),S=new W("冰","ice",!1,0,!1),I=new W("土","dust",!0,0,!1),L=new W("木","wood",!0,0,!1),E=new W("石","stone",!0,3,!1),V=new W("水","water",!1,0,!1),A=new W("沼泽","swamp",!1,0,!1),B=[I,L,S,O],U={grass:D,fire:O,ice:S,dust:I,wood:L,stone:E,water:V,swamp:A};a.default.use(R.a);var N=new R.a.Store({state:{round:0,loading:!0,convey:[],map:[],conveyChoose:{},mapChoose:{},dialogWinOpen:!1,dialogLoseOpen:!1},getters:{getConvey:function(e){return e.convey},getMap:function(e){return e.map},getWinDialog:function(e){return e.dialogWinOpen},getLoseDialog:function(e){return e.dialogLoseOpen}},mutations:{resetRound:function(e){e.round=0},openWinDialog:function(e){e.dialogWinOpen=!0},openLoseDialog:function(e){e.dialogLoseOpen=!0},closeDialog:function(e){e.dialogWinOpen=!1,e.dialogLoseOpen=!1},resetConvey:function(e){e.convey=[]},refreshConvey:function(e){for(var t=0;t<3;t++)if(e.round>2){var o=Math.floor(10*Math.random())%4,a=B[o];a.selected=!1,e.convey.push(a)}else{var n=Math.floor(10*Math.random())%2,r=B[n];r.selected=!1,e.convey.push(r)}e.round++},restart:function(e){({round:0,loading:!0,convey:[],map:[],conveyChoose:{},mapChoose:{}})},initMap:function(e){for(var t=[],o=0;o<6;o++){for(var a=[],n=0;n<9;n++)a.push(D);t.push(a)}var r=Math.floor(10*Math.random())%8+1,s=Math.floor(10*Math.random())%4+1,i=Math.floor(10*Math.random())%6;switch(t[s][r]=O,i){case 0:t[s][r-1]=O,t[s][r+1]=O;break;case 1:t[s-1][r]=O,t[s+1][r]=O;break;case 2:t[s][r-1]=O,t[s+1][r]=O;break;case 3:t[s-1][r]=O,t[s][r+1]=O;break;case 4:t[s-1][r]=O,t[s][r-1]=O;break;case 5:t[s+1][r]=O,t[s][r+1]=O}e.map=t},setMapChoose:function(e,t){e.mapChoose=t;var o=t.col,n=t.row;if(e.conveyChoose.code){var r=F(e.conveyChoose.code,t.code);if("ice"===e.conveyChoose.code&&"fire"===t.code)a.default.set(e.map[n],o,V),o-1>=0&&a.default.set(e.map[n],o-1,U[F(e.map[n][o-1].code,"water")]),o+1<e.map[0].length&&a.default.set(e.map[n],o+1,U[F(e.map[n][o+1].code,"water")]),n-1>=0&&a.default.set(e.map[n-1],o,U[F(e.map[n-1][o].code,"water")]),n+1<e.map.length&&a.default.set(e.map[n+1],o,U[F(e.map[n+1][o].code,"water")]);else if("dust"===e.conveyChoose.code&&"water"===t.code){var s=[];for(s.push({row:n,col:o});0!==s.length;){var i=s.pop();a.default.set(e.map[i.row],i.col,A),i.col-1>=0&&"water"===e.map[i.row][i.col-1].code&&s.push({row:i.row,col:i.col-1}),i.col+1<e.map[0].length&&"water"===e.map[i.row][i.col+1].code&&s.push({row:i.row,col:i.col+1}),i.row-1>=0&&"water"===e.map[i.row-1][i.col].code&&s.push({row:i.row-1,col:i.col}),i.row+1<e.map.length&&"water"===e.map[i.row+1][i.col].code&&s.push({row:i.row+1,col:i.col})}}else a.default.set(e.map[n],o,U[r]);e.convey.splice(e.conveyChoose.index,1),e.conveyChoose={}}},setConveyChoose:function(e,t){for(var o=0;o<e.convey.length;o++)a.default.set(e.convey,o,$()({},e.convey[o],{selected:!1}));e.conveyChoose=t,a.default.set(e.convey,t.index,$()({},e.convey[t.index],{selected:!0}))},systemRound:function(e){for(var t=[],o=[],n=0,r=0,s=0;s<e.map.length;s++)for(var i=0;i<e.map[s].length;i++){if("water"===e.map[s][i].code||"swamp"===e.map[s][i].code){var c=0;s-1>=0&&"fire"===e.map[s-1][i].code&&c++,s+1<e.map.length&&"fire"===e.map[s+1][i].code&&c++,i-1>=0&&"fire"===e.map[s][i-1].code&&c++,i+1<e.map[s].length&&"fire"===e.map[s][i+1].code&&c++,c>=2&&"swamp"===e.map[s][i].code&&a.default.set(e.map[s],i,D),c>=3&&"water"===e.map[s][i].code&&a.default.set(e.map[s],i,D)}if("stone"===e.map[s][i].code&&e.map[s][i].remainRound>0&&a.default.set(e.map[s][i],"remainRound",e.map[s][i].remainRound-1),"swamp"===e.map[s][i].code){if(s-1>=0&&"swamp"!==e.map[s-1][i].code&&"fire"!==e.map[s-1][i].code&&"ice"!==e.map[s-1][i].code&&"wood"!==e.map[s-1][i].code&&"stone"!==e.map[s-1][i].code){var d=1;"water"!==e.map[s-1][i].code&&"dust"!==e.map[s-1][i].code||(d=3),r+=d,o.push({row:s-1,col:i,factor:d})}if(s+1<e.map.length&&"swamp"!==e.map[s+1][i].code&&"fire"!==e.map[s+1][i].code&&"ice"!==e.map[s+1][i].code&&"wood"!==e.map[s+1][i].code&&"stone"!==e.map[s+1][i].code){var p=1;"water"!==e.map[s+1][i].code&&"dust"!==e.map[s+1][i].code||(p=3),r+=p,o.push({row:s+1,col:i,factor:p})}if(i-1>=0&&"swamp"!==e.map[s][i-1].code&&"fire"!==e.map[s][i-1].code&&"ice"!==e.map[s][i-1].code&&"wood"!==e.map[s][i-1].code&&"stone"!==e.map[s][i-1].code){var l=1;"water"!==e.map[s][i-1].code&&"dust"!==e.map[s][i-1].code||(l=3),r+=l,o.push({row:s,col:i-1,factor:l})}if(i+1<e.map[s].length&&"swamp"!==e.map[s][i+1].code&&"fire"!==e.map[s][i+1].code&&"ice"!==e.map[s][i+1].code&&"wood"!==e.map[s][i+1].code&&"stone"!==e.map[s][i+1].code){var m=1;"water"!==e.map[s][i+1].code&&"dust"!==e.map[s][i+1].code||(m=3),r+=m,o.push({row:s,col:i+1,factor:m})}}if(e.map[s][i].isFired){if(s-1>=0&&!e.map[s-1][i].isFired&&"water"!==e.map[s-1][i].code&&"swamp"!==e.map[s-1][i].code&&!("stone"===e.map[s-1][i].code&&e.map[s-1][i].remainRound>0)){var u=1;"wood"===e.map[s-1][i].code&&(u=3),n+=u,t.push({row:s-1,col:i,factor:u})}if(s+1<e.map.length&&!e.map[s+1][i].isFired&&"water"!==e.map[s+1][i].code&&"swamp"!==e.map[s+1][i].code&&!("stone"===e.map[s+1][i].code&&e.map[s+1][i].remainRound>0)){var f=1;"wood"===e.map[s+1][i].code&&(f=3),n+=f,t.push({row:s+1,col:i,factor:f})}if(i-1>=0&&!e.map[s][i-1].isFired&&"water"!==e.map[s][i-1].code&&"swamp"!==e.map[s][i-1].code&&!("stone"===e.map[s][i-1].code&&e.map[s][i-1].remainRound>0)){var h=1;"wood"===e.map[s][i-1].code&&(h=3),n+=h,t.push({row:s,col:i-1,factor:h})}if(i+1<e.map[s].length&&!e.map[s][i+1].isFired&&"water"!==e.map[s][i+1].code&&"swamp"!==e.map[s][i+1].code&&!("stone"===e.map[s][i+1].code&&e.map[s][i+1].remainRound>0)){var v=1;"wood"===e.map[s][i+1].code&&(v=3),n+=v,t.push({row:s,col:i+1,factor:v})}}}var w=M()((t.length/4).toFixed(0));console.log("totalCount: "+w);for(var g=0;g<w;g++)for(var y=M()((Math.random()*n).toFixed(0)),C=0;C<t.length;C++)if((y-=t[C].factor)<=0){n-=t[C].factor,console.log({row:t[C].row,col:t[C].col});var x=F(e.map[t[C].row][t[C].col].code,"fire");a.default.set(e.map[t[C].row],t[C].col,U[x]),t.splice(C,1);break}var b=M()((o.length/2).toFixed(0));console.log("swampCount: "+b);for(var k=0;k<b;k++)for(var _=M()((Math.random()*r).toFixed(0)),$=0;$<o.length;$++)if((_-=o[$].factor)<=0){r-=o[$].factor;var R=F("swamp",e.map[o[$].row][o[$].col].code);console.log("swamp + "+e.map[o[$].row][o[$].col].code+" = "+R),a.default.set(e.map[o[$].row],o[$].col,U[R]),o.splice($,1);break}}},actions:{}});a.default.use(s.a);var j=[{path:"/",name:"Start",component:b},{path:"/index",name:"Index",component:y}],z=new s.a({routes:j});z.beforeEach(function(e,t,o){"/index"===t.path&&"/"===e.path&&!0!==N.getters.getWinDialog&&!0!==N.getters.getLoseDialog||o()});var H=z,P=o("zL8q"),T=o.n(P),Y=(o("tvR6"),o("oPmM")),q=o.n(Y);a.default.config.productionTip=!1,a.default.use(T.a),a.default.use(q.a),new a.default({el:"#app",router:H,store:N,components:{App:r},template:"<App/>"})},nnmr:function(e,t){},oPmM:function(e,t){},tajt:function(e,t){},tvR6:function(e,t){},v9Yw:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.9739c33ce668328f3292.js.map